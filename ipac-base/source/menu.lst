GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 1


   1               		.file	"menu.c"
   2               		.arch atmega2561
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.data
  11               	.LC0:
  12 0000 4D65 6E75 		.string	"MenuThread"
  12      5468 7265 
  12      6164 00
  13               		.text
  14               	.global	MenuInit
  15               		.type	MenuInit, @function
  16               	MenuInit:
  17               	/* prologue: frame size=0 */
  18               	/* prologue end (size=0) */
  19 0000 81E0      		ldi r24,lo8(1)
  20 0002 0E94 0000 		call NutThreadSetPriority
  21 0006 20E0      		ldi r18,lo8(1024)
  22 0008 34E0      		ldi r19,hi8(1024)
  23 000a 40E0      		ldi r20,lo8(0)
  24 000c 50E0      		ldi r21,hi8(0)
  25 000e 60E0      		ldi r22,lo8(gs(MenuThread))
  26 0010 70E0      		ldi r23,hi8(gs(MenuThread))
  27 0012 80E0      		ldi r24,lo8(.LC0)
  28 0014 90E0      		ldi r25,hi8(.LC0)
  29 0016 0E94 0000 		call NutThreadCreate
  30               	/* epilogue: frame size=0 */
  31 001a 0895      		ret
  32               	/* epilogue end (size=1) */
  33               	/* function MenuInit size 14 (13) */
  34               		.size	MenuInit, .-MenuInit
  35               	.global	DisplayItem
  36               		.type	DisplayItem, @function
  37               	DisplayItem:
  38               	/* prologue: frame size=0 */
  39 001c CF93      		push r28
  40 001e DF93      		push r29
  41               	/* prologue end (size=2) */
  42 0020 EC01      		movw r28,r24
  43 0022 6130      		cpi r22,1
  44 0024 7105      		cpc r23,__zero_reg__
  45 0026 01F4      		brne .L4
  46 0028 0E94 0000 		call LcdClearLine
  47               	.L4:
  48 002c CE01      		movw r24,r28
  49 002e 0E94 0000 		call LcdWriteSecondLine
  50               	/* epilogue: frame size=0 */
  51 0032 DF91      		pop r29
  52 0034 CF91      		pop r28
  53 0036 0895      		ret
  54               	/* epilogue end (size=3) */
  55               	/* function DisplayItem size 14 (9) */
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 2


  56               		.size	DisplayItem, .-DisplayItem
  57               		.data
  58               	.LC1:
  59 000b 00        		.string	""
  60               		.text
  61               	.global	MenuThread
  62               		.type	MenuThread, @function
  63               	MenuThread:
  64               	/* prologue: frame size=0 */
  65               	/* prologue end (size=0) */
  66               	.L54:
  67 0038 64E6      		ldi r22,lo8(100)
  68 003a 70E0      		ldi r23,hi8(100)
  69 003c 80E0      		ldi r24,hlo8(100)
  70 003e 90E0      		ldi r25,hhi8(100)
  71 0040 0E94 0000 		call NutSleep
  72 0044 0E94 0000 		call KbGetKey
  73 0048 182F      		mov r17,r24
  74 004a 8838      		cpi r24,lo8(-120)
  75 004c 01F4      		brne .+2
  76 004e 00C0      		rjmp .L10
  77 0050 81E0      		ldi r24,lo8(1)
  78 0052 0E94 0000 		call LcdBackLight
  79 0056 8091 0000 		lds r24,menu_enabled
  80 005a 9091 0000 		lds r25,(menu_enabled)+1
  81 005e 0197      		sbiw r24,1
  82 0060 01F0      		breq .+2
  83 0062 00C0      		rjmp .L12
  84 0064 8091 0000 		lds r24,submenu_enabled
  85 0068 9091 0000 		lds r25,(submenu_enabled)+1
  86 006c 0097      		sbiw r24,0
  87 006e 01F0      		breq .+2
  88 0070 00C0      		rjmp .L14
  89 0072 1830      		cpi r17,lo8(8)
  90 0074 01F4      		brne .L16
  91 0076 8091 0000 		lds r24,menu_item
  92 007a 9091 0000 		lds r25,(menu_item)+1
  93 007e 1816      		cp __zero_reg__,r24
  94 0080 1906      		cpc __zero_reg__,r25
  95 0082 04F0      		brlt .+2
  96 0084 00C0      		rjmp .L10
  97 0086 0197      		sbiw r24,1
  98 0088 00C0      		rjmp .L52
  99               	.L16:
 100 008a 1B30      		cpi r17,lo8(11)
 101 008c 01F0      		breq .+2
 102 008e 00C0      		rjmp .L12
 103 0090 8091 0000 		lds r24,menu_item
 104 0094 9091 0000 		lds r25,(menu_item)+1
 105 0098 0196      		adiw r24,1
 106 009a 8330      		cpi r24,3
 107 009c 9105      		cpc r25,__zero_reg__
 108 009e 00F0      		brlo .+2
 109 00a0 00C0      		rjmp .L10
 110               	.L52:
 111 00a2 9093 0000 		sts (menu_item)+1,r25
 112 00a6 8093 0000 		sts menu_item,r24
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 3


 113 00aa 00C0      		rjmp .L10
 114               	.L22:
 115 00ac 1930      		cpi r17,lo8(9)
 116 00ae 01F4      		brne .L23
 117 00b0 1092 0000 		sts (menu_enabled)+1,__zero_reg__
 118 00b4 1092 0000 		sts menu_enabled,__zero_reg__
 119 00b8 1092 0000 		sts (submenu_enabled)+1,__zero_reg__
 120 00bc 1092 0000 		sts submenu_enabled,__zero_reg__
 121 00c0 E091 0000 		lds r30,menu_item
 122 00c4 F091 0000 		lds r31,(menu_item)+1
 123 00c8 EE0F      		lsl r30
 124 00ca FF1F      		rol r31
 125 00cc EE0F      		lsl r30
 126 00ce FF1F      		rol r31
 127 00d0 8091 0000 		lds r24,menu_subitem
 128 00d4 9091 0000 		lds r25,(menu_subitem)+1
 129 00d8 E80F      		add r30,r24
 130 00da F91F      		adc r31,r25
 131 00dc EE0F      		lsl r30
 132 00de FF1F      		rol r31
 133 00e0 EE0F      		lsl r30
 134 00e2 FF1F      		rol r31
 135 00e4 E050      		subi r30,lo8(-(menusubitems))
 136 00e6 F040      		sbci r31,hi8(-(menusubitems))
 137 00e8 0280      		ldd __tmp_reg__,Z+2
 138 00ea F381      		ldd r31,Z+3
 139 00ec E02D      		mov r30,__tmp_reg__
 140 00ee 1995      		eicall
 141 00f0 00C0      		rjmp .L25
 142               	.L23:
 143 00f2 1830      		cpi r17,lo8(8)
 144 00f4 01F4      		brne .L26
 145 00f6 8091 0000 		lds r24,menu_subitem
 146 00fa 9091 0000 		lds r25,(menu_subitem)+1
 147 00fe 1816      		cp __zero_reg__,r24
 148 0100 1906      		cpc __zero_reg__,r25
 149 0102 04F0      		brlt .+2
 150 0104 00C0      		rjmp .L10
 151 0106 0197      		sbiw r24,1
 152 0108 9093 0000 		sts (menu_subitem)+1,r25
 153 010c 8093 0000 		sts menu_subitem,r24
 154 0110 00C0      		rjmp .L10
 155               	.L26:
 156 0112 1B30      		cpi r17,lo8(11)
 157 0114 01F4      		brne .L12
 158 0116 8091 0000 		lds r24,menu_subitem
 159 011a 9091 0000 		lds r25,(menu_subitem)+1
 160 011e 0196      		adiw r24,1
 161 0120 8430      		cpi r24,4
 162 0122 9105      		cpc r25,__zero_reg__
 163 0124 00F0      		brlo .+2
 164 0126 00C0      		rjmp .L33
 165 0128 9093 0000 		sts (menu_subitem)+1,r25
 166 012c 8093 0000 		sts menu_subitem,r24
 167 0130 00C0      		rjmp .L33
 168               	.L12:
 169 0132 1E30      		cpi r17,lo8(14)
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 4


 170 0134 01F4      		brne .L18
 171 0136 81E0      		ldi r24,lo8(1)
 172 0138 90E0      		ldi r25,hi8(1)
 173 013a 9093 0000 		sts (menu_enabled)+1,r25
 174 013e 8093 0000 		sts menu_enabled,r24
 175 0142 00C0      		rjmp .L33
 176               	.L18:
 177 0144 1930      		cpi r17,lo8(9)
 178 0146 01F4      		brne .L34
 179               	.L25:
 180 0148 8091 0000 		lds r24,menu_enabled
 181 014c 9091 0000 		lds r25,(menu_enabled)+1
 182 0150 8130      		cpi r24,1
 183 0152 9105      		cpc r25,__zero_reg__
 184 0154 01F4      		brne .L10
 185 0156 9093 0000 		sts (submenu_enabled)+1,r25
 186 015a 8093 0000 		sts submenu_enabled,r24
 187 015e 00C0      		rjmp .L33
 188               	.L34:
 189 0160 1730      		cpi r17,lo8(7)
 190 0162 01F4      		brne .L10
 191 0164 8091 0000 		lds r24,submenu_enabled
 192 0168 9091 0000 		lds r25,(submenu_enabled)+1
 193 016c 0197      		sbiw r24,1
 194 016e 01F4      		brne .L37
 195 0170 1092 0000 		sts (submenu_enabled)+1,__zero_reg__
 196 0174 1092 0000 		sts submenu_enabled,__zero_reg__
 197 0178 00C0      		rjmp .L10
 198               	.L37:
 199 017a 1092 0000 		sts (submenu_enabled)+1,__zero_reg__
 200 017e 1092 0000 		sts submenu_enabled,__zero_reg__
 201 0182 1092 0000 		sts (menu_enabled)+1,__zero_reg__
 202 0186 1092 0000 		sts menu_enabled,__zero_reg__
 203 018a 0E94 0000 		call LcdClearLine
 204               	.L10:
 205 018e 8091 0000 		lds r24,menu_enabled
 206 0192 9091 0000 		lds r25,(menu_enabled)+1
 207 0196 0097      		sbiw r24,0
 208 0198 01F4      		brne .+2
 209 019a 00C0      		rjmp .L54
 210               	.L39:
 211 019c 0097      		sbiw r24,0
 212 019e 01F0      		breq .L41
 213 01a0 0197      		sbiw r24,1
 214 01a2 01F4      		brne .L40
 215 01a4 00C0      		rjmp .L42
 216               	.L41:
 217 01a6 61E0      		ldi r22,lo8(1)
 218 01a8 70E0      		ldi r23,hi8(1)
 219 01aa 80E0      		ldi r24,lo8(.LC1)
 220 01ac 90E0      		ldi r25,hi8(.LC1)
 221 01ae 00C0      		rjmp .L53
 222               	.L42:
 223 01b0 E091 0000 		lds r30,menu_item
 224 01b4 F091 0000 		lds r31,(menu_item)+1
 225 01b8 EE0F      		lsl r30
 226 01ba FF1F      		rol r31
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 5


 227 01bc E050      		subi r30,lo8(-(menuitems))
 228 01be F040      		sbci r31,hi8(-(menuitems))
 229 01c0 61E0      		ldi r22,lo8(1)
 230 01c2 70E0      		ldi r23,hi8(1)
 231 01c4 8081      		ld r24,Z
 232 01c6 9181      		ldd r25,Z+1
 233               	.L53:
 234 01c8 0E94 0000 		call DisplayItem
 235               	.L40:
 236 01cc 8091 0000 		lds r24,submenu_enabled
 237 01d0 9091 0000 		lds r25,(submenu_enabled)+1
 238 01d4 0197      		sbiw r24,1
 239 01d6 01F4      		brne .L50
 240 01d8 E091 0000 		lds r30,menu_item
 241 01dc F091 0000 		lds r31,(menu_item)+1
 242 01e0 EE0F      		lsl r30
 243 01e2 FF1F      		rol r31
 244 01e4 EE0F      		lsl r30
 245 01e6 FF1F      		rol r31
 246 01e8 8091 0000 		lds r24,menu_subitem
 247 01ec 9091 0000 		lds r25,(menu_subitem)+1
 248 01f0 E80F      		add r30,r24
 249 01f2 F91F      		adc r31,r25
 250 01f4 EE0F      		lsl r30
 251 01f6 FF1F      		rol r31
 252 01f8 EE0F      		lsl r30
 253 01fa FF1F      		rol r31
 254 01fc E050      		subi r30,lo8(-(menusubitems))
 255 01fe F040      		sbci r31,hi8(-(menusubitems))
 256 0200 61E0      		ldi r22,lo8(1)
 257 0202 70E0      		ldi r23,hi8(1)
 258 0204 8081      		ld r24,Z
 259 0206 9181      		ldd r25,Z+1
 260 0208 0E94 0000 		call DisplayItem
 261               	.L50:
 262 020c 0E94 0000 		call KbGetKey
 263 0210 8838      		cpi r24,lo8(-120)
 264 0212 01F4      		brne .+2
 265 0214 00C0      		rjmp .L54
 266 0216 00C0      		rjmp .L50
 267               	.L14:
 268 0218 0197      		sbiw r24,1
 269 021a 01F4      		brne .+2
 270 021c 00C0      		rjmp .L22
 271 021e 00C0      		rjmp .L12
 272               	.L33:
 273 0220 8091 0000 		lds r24,menu_enabled
 274 0224 9091 0000 		lds r25,(menu_enabled)+1
 275 0228 00C0      		rjmp .L39
 276               	/* epilogue: frame size=0 */
 277               	/* epilogue: noreturn */
 278               	/* epilogue end (size=0) */
 279               	/* function MenuThread size 254 (254) */
 280               		.size	MenuThread, .-MenuThread
 281               	.global	ShowSetting
 282               		.type	ShowSetting, @function
 283               	ShowSetting:
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 6


 284               	/* prologue: frame size=0 */
 285               	/* prologue end (size=0) */
 286 022a 80E0      		ldi r24,lo8(__c.2028)
 287 022c 90E0      		ldi r25,hi8(__c.2028)
 288 022e 9F93      		push r25
 289 0230 8F93      		push r24
 290 0232 86ED      		ldi r24,lo8(-42)
 291 0234 8F93      		push r24
 292 0236 0E94 0000 		call LogMsg_P
 293 023a 0F90      		pop __tmp_reg__
 294 023c 0F90      		pop __tmp_reg__
 295 023e 0F90      	 	pop __tmp_reg__
 296               	/* epilogue: frame size=0 */
 297 0240 0895      		ret
 298               	/* epilogue end (size=1) */
 299               	/* function ShowSetting size 12 (11) */
 300               		.size	ShowSetting, .-ShowSetting
 301               	.global	menu_enabled
 302               	.global	menu_enabled
 303               		.section .bss
 304               		.type	menu_enabled, @object
 305               		.size	menu_enabled, 2
 306               	menu_enabled:
 307 0000 0000      		.skip 2,0
 308               	.global	submenu_enabled
 309               	.global	submenu_enabled
 310               		.type	submenu_enabled, @object
 311               		.size	submenu_enabled, 2
 312               	submenu_enabled:
 313 0002 0000      		.skip 2,0
 314               	.global	menu_item
 315               	.global	menu_item
 316               		.type	menu_item, @object
 317               		.size	menu_item, 2
 318               	menu_item:
 319 0004 0000      		.skip 2,0
 320               	.global	menu_subitem
 321               	.global	menu_subitem
 322               		.type	menu_subitem, @object
 323               		.size	menu_subitem, 2
 324               	menu_subitem:
 325 0006 0000      		.skip 2,0
 326               	.global	menuitems
 327               		.data
 328               	.LC2:
 329 000c 4D75 7369 		.string	"Music"
 329      6300 
 330               	.LC3:
 331 0012 416C 6172 		.string	"Alarm"
 331      6D00 
 332               	.LC4:
 333 0018 5365 7474 		.string	"Settings"
 333      696E 6773 
 333      00
 334               		.type	menuitems, @object
 335               		.size	menuitems, 6
 336               	menuitems:
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 7


 337 0021 0000      		.word	.LC2
 338 0023 0000      		.word	.LC3
 339 0025 0000      		.word	.LC4
 340               	.global	menusubitems
 341               	.LC5:
 342 0027 5261 6469 		.string	"Radio"
 342      6F00 
 343               	.LC6:
 344 002d 5344 00   		.string	"SD"
 345               	.LC7:
 346 0030 416C 6172 		.string	"Alarm 2"
 346      6D20 3200 
 347               	.LC8:
 348 0038 5469 6D65 		.string	"Timezone"
 348      7A6F 6E65 
 348      00
 349               	.LC9:
 350 0041 5469 6D65 		.string	"Time"
 350      00
 351               	.LC10:
 352 0046 4461 7465 		.string	"Date"
 352      00
 353               	.LC11:
 354 004b 4950 2041 		.string	"IP Adress"
 354      6472 6573 
 354      7300 
 355               		.type	menusubitems, @object
 356               		.size	menusubitems, 48
 357               	menusubitems:
 358 0055 0000      		.word	.LC5
 359 0057 0000      		.word	gs(ShowSetting)
 360 0059 0000      		.word	.LC6
 361 005b 0000      		.word	gs(ShowSetting)
 362 005d 0000 0000 		.skip 8,0
 362      0000 0000 
 363 0065 0000      		.word	.LC7
 364 0067 0000      		.word	gs(ShowSetting)
 365 0069 0000      		.word	.LC7
 366 006b 0000      		.word	gs(ShowSetting)
 367 006d 0000 0000 		.skip 8,0
 367      0000 0000 
 368 0075 0000      		.word	.LC8
 369 0077 0000      		.word	gs(InitializeTimeZone)
 370 0079 0000      		.word	.LC9
 371 007b 0000      		.word	gs(setTimeManually)
 372 007d 0000      		.word	.LC10
 373 007f 0000      		.word	gs(ShowSetting)
 374 0081 0000      		.word	.LC11
 375 0083 0000      		.word	gs(ShowSetting)
 376               		.section	.progmem.data,"a",@progbits
 377               		.type	__c.2028, @object
 378               		.size	__c.2028, 13
 379               	__c.2028:
 380 0000 5368 6F77 		.string	"ShowSettings"
 380      5365 7474 
 380      696E 6773 
 380      00
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 8


 381               	/* File "source/menu.c": code  294 = 0x0126 ( 287), prologues   2, epilogues   5 */
GAS LISTING C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 menu.c
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:3      *ABS*:0000003f __SREG__
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:4      *ABS*:0000003e __SP_H__
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:5      *ABS*:0000003d __SP_L__
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:7      *ABS*:00000001 __zero_reg__
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:16     .text:00000000 MenuInit
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:63     .text:00000038 MenuThread
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:37     .text:0000001c DisplayItem
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:306    .bss:00000000 menu_enabled
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:312    .bss:00000002 submenu_enabled
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:318    .bss:00000004 menu_item
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:324    .bss:00000006 menu_subitem
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:357    .data:00000055 menusubitems
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:336    .data:00000021 menuitems
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:283    .text:0000022a ShowSetting
C:\Users\Matthijs\AppData\Local\Temp/ccVN4PHL.s:379    .progmem.data:00000000 __c.2028

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
NutThreadSetPriority
NutThreadCreate
LcdClearLine
LcdWriteSecondLine
NutSleep
KbGetKey
LcdBackLight
LogMsg_P
InitializeTimeZone
setTimeManually

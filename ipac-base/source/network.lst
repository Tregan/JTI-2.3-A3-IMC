GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 1


   1               		.file	"network.c"
   2               		.arch atmega2561
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  10               		.text
  11               	.global	stopStream
  12               		.type	stopStream, @function
  13               	stopStream:
  14               	/* prologue: frame size=0 */
  15               	/* prologue end (size=0) */
  16 0000 8091 0000 		lds r24,stream
  17 0004 9091 0000 		lds r25,(stream)+1
  18 0008 0E94 0000 		call fclose
  19               	/* epilogue: frame size=0 */
  20 000c 0895      		ret
  21               	/* epilogue end (size=1) */
  22               	/* function stopStream size 7 (6) */
  23               		.size	stopStream, .-stopStream
  24               		.data
  25               	.LC0:
  26 0000 3831 2E31 		.string	"81.173.3.132"
  26      3733 2E33 
  26      2E31 3332 
  26      00
  27               	.LC1:
  28 000d 722B 6200 		.string	"r+b"
  29               	.LC2:
  30 0011 2F00      		.string	"/"
  31               	.LC3:
  32 0013 4745 5420 		.string	"GET %s HTTP/1.0\r\n"
  32      2573 2048 
  32      5454 502F 
  32      312E 300D 
  32      0A00 
  33               	.LC4:
  34 0025 3632 2E32 		.string	"62.212.132.54"
  34      3132 2E31 
  34      3332 2E35 
  34      3400 
  35               	.LC5:
  36 0033 486F 7374 		.string	"Host: %s\r\n"
  36      3A20 2573 
  36      0D0A 00
  37               	.LC6:
  38 003e 5573 6572 		.string	"User-Agent: Ethernut\r\n"
  38      2D41 6765 
  38      6E74 3A20 
  38      4574 6865 
  38      726E 7574 
  39               	.LC7:
  40 0055 4163 6365 		.string	"Accept: */*\r\n"
  40      7074 3A20 
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 2


  40      2A2F 2A0D 
  40      0A00 
  41               	.LC8:
  42 0063 4963 792D 		.string	"Icy-MetaData: 1\r\n"
  42      4D65 7461 
  42      4461 7461 
  42      3A20 310D 
  42      0A00 
  43               	.LC9:
  44 0075 436F 6E6E 		.string	"Connection: close\r\n\r\n"
  44      6563 7469 
  44      6F6E 3A20 
  44      636C 6F73 
  44      650D 0A0D 
  45               	.LC10:
  46 008b 2573 00   		.string	"%s"
  47               		.text
  48               	.global	connectToStream
  49               		.type	connectToStream, @function
  50               	connectToStream:
  51               	/* prologue: frame size=0 */
  52 000e CF93      		push r28
  53 0010 DF93      		push r29
  54               	/* prologue end (size=2) */
  55 0012 0E94 0000 		call NutTcpCreateSocket
  56 0016 EC01      		movw r28,r24
  57 0018 80E0      		ldi r24,lo8(.LC0)
  58 001a 90E0      		ldi r25,hi8(.LC0)
  59 001c 0E94 0000 		call inet_addr
  60 0020 AB01      		movw r20,r22
  61 0022 BC01      		movw r22,r24
  62 0024 22E9      		ldi r18,lo8(8082)
  63 0026 3FE1      		ldi r19,hi8(8082)
  64 0028 CE01      		movw r24,r28
  65 002a 0E94 0000 		call NutTcpConnect
  66 002e 892B      		or r24,r25
  67 0030 01F0      		breq .L4
  68 0032 80E0      		ldi r24,lo8(__c.2425)
  69 0034 90E0      		ldi r25,hi8(__c.2425)
  70 0036 9F93      		push r25
  71 0038 8F93      		push r24
  72 003a 8BE8      		ldi r24,lo8(-117)
  73 003c 8F93      		push r24
  74 003e 0E94 0000 		call LogMsg_P
  75 0042 81E0      		ldi r24,lo8(1)
  76 0044 90E0      		ldi r25,hi8(1)
  77 0046 0E94 0000 		call exit
  78               	.L4:
  79 004a 60E0      		ldi r22,lo8(.LC1)
  80 004c 70E0      		ldi r23,hi8(.LC1)
  81 004e CE01      		movw r24,r28
  82 0050 0E94 0000 		call _fdopen
  83 0054 9093 0000 		sts (stream)+1,r25
  84 0058 8093 0000 		sts stream,r24
  85 005c 20E0      		ldi r18,lo8(.LC2)
  86 005e 30E0      		ldi r19,hi8(.LC2)
  87 0060 3F93      		push r19
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 3


  88 0062 2F93      		push r18
  89 0064 20E0      		ldi r18,lo8(.LC3)
  90 0066 30E0      		ldi r19,hi8(.LC3)
  91 0068 3F93      		push r19
  92 006a 2F93      		push r18
  93 006c 9F93      		push r25
  94 006e 8F93      		push r24
  95 0070 0E94 0000 		call fprintf
  96 0074 80E0      		ldi r24,lo8(.LC4)
  97 0076 90E0      		ldi r25,hi8(.LC4)
  98 0078 9F93      		push r25
  99 007a 8F93      		push r24
 100 007c 80E0      		ldi r24,lo8(.LC5)
 101 007e 90E0      		ldi r25,hi8(.LC5)
 102 0080 9F93      		push r25
 103 0082 8F93      		push r24
 104 0084 8091 0000 		lds r24,stream
 105 0088 9091 0000 		lds r25,(stream)+1
 106 008c 9F93      		push r25
 107 008e 8F93      		push r24
 108 0090 0E94 0000 		call fprintf
 109 0094 6091 0000 		lds r22,stream
 110 0098 7091 0000 		lds r23,(stream)+1
 111 009c 80E0      		ldi r24,lo8(.LC6)
 112 009e 90E0      		ldi r25,hi8(.LC6)
 113 00a0 0E94 0000 		call fputs
 114 00a4 6091 0000 		lds r22,stream
 115 00a8 7091 0000 		lds r23,(stream)+1
 116 00ac 80E0      		ldi r24,lo8(.LC7)
 117 00ae 90E0      		ldi r25,hi8(.LC7)
 118 00b0 0E94 0000 		call fputs
 119 00b4 6091 0000 		lds r22,stream
 120 00b8 7091 0000 		lds r23,(stream)+1
 121 00bc 80E0      		ldi r24,lo8(.LC8)
 122 00be 90E0      		ldi r25,hi8(.LC8)
 123 00c0 0E94 0000 		call fputs
 124 00c4 6091 0000 		lds r22,stream
 125 00c8 7091 0000 		lds r23,(stream)+1
 126 00cc 80E0      		ldi r24,lo8(.LC9)
 127 00ce 90E0      		ldi r25,hi8(.LC9)
 128 00d0 0E94 0000 		call fputs
 129 00d4 8091 0000 		lds r24,stream
 130 00d8 9091 0000 		lds r25,(stream)+1
 131 00dc 0E94 0000 		call fflush
 132 00e0 80E0      		ldi r24,lo8(512)
 133 00e2 92E0      		ldi r25,hi8(512)
 134 00e4 0E94 0000 		call malloc
 135 00e8 EC01      		movw r28,r24
 136 00ea 8DB7      		in r24,__SP_L__
 137 00ec 9EB7      		in r25,__SP_H__
 138 00ee 0C96      		adiw r24,12
 139 00f0 0FB6      		in __tmp_reg__,__SREG__
 140 00f2 F894      		cli
 141 00f4 9EBF      		out __SP_H__,r25
 142 00f6 0FBE      		out __SREG__,__tmp_reg__
 143 00f8 8DBF      		out __SP_L__,r24
 144 00fa 00C0      		rjmp .L6
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 4


 145               	.L7:
 146 00fc 8881      		ld r24,Y
 147 00fe 8823      		tst r24
 148 0100 01F0      		breq .L8
 149 0102 DF93      		push r29
 150 0104 CF93      		push r28
 151 0106 80E0      		ldi r24,lo8(.LC10)
 152 0108 90E0      		ldi r25,hi8(.LC10)
 153 010a 9F93      		push r25
 154 010c 8F93      		push r24
 155 010e 0E94 0000 		call printf
 156 0112 0F90      		pop __tmp_reg__
 157 0114 0F90      		pop __tmp_reg__
 158 0116 0F90      		pop __tmp_reg__
 159 0118 0F90      		pop __tmp_reg__
 160               	.L6:
 161 011a 4091 0000 		lds r20,stream
 162 011e 5091 0000 		lds r21,(stream)+1
 163 0122 60E0      		ldi r22,lo8(512)
 164 0124 72E0      		ldi r23,hi8(512)
 165 0126 CE01      		movw r24,r28
 166 0128 0E94 0000 		call fgets
 167 012c 892B      		or r24,r25
 168 012e 01F4      		brne .L7
 169               	.L8:
 170 0130 CE01      		movw r24,r28
 171 0132 0E94 0000 		call free
 172 0136 81E0      		ldi r24,lo8(1)
 173 0138 90E0      		ldi r25,hi8(1)
 174               	/* epilogue: frame size=0 */
 175 013a DF91      		pop r29
 176 013c CF91      		pop r28
 177 013e 0895      		ret
 178               	/* epilogue end (size=3) */
 179               	/* function connectToStream size 153 (148) */
 180               		.size	connectToStream, .-connectToStream
 181               	.global	playStream
 182               		.type	playStream, @function
 183               	playStream:
 184               	/* prologue: frame size=0 */
 185               	/* prologue end (size=0) */
 186 0140 0E94 0000 		call connectToStream
 187 0144 8091 0000 		lds r24,stream
 188 0148 9091 0000 		lds r25,(stream)+1
 189 014c 0E94 0000 		call play
 190               	/* epilogue: frame size=0 */
 191 0150 0895      		ret
 192               	/* epilogue end (size=1) */
 193               	/* function playStream size 9 (8) */
 194               		.size	playStream, .-playStream
 195               		.data
 196               	.LC11:
 197 008e 0A52 6574 		.string	"\nRetrieving time from ntp"
 197      7269 6576 
 197      696E 6720 
 197      7469 6D65 
 197      2066 726F 
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 5


 198               	.LC12:
 199 00a8 5265 7472 		.string	"Retrieving time from NTP..."
 199      6965 7669 
 199      6E67 2074 
 199      696D 6520 
 199      6672 6F6D 
 200               	.LC13:
 201 00c4 3738 2E31 		.string	"78.192.65.63"
 201      3932 2E36 
 201      352E 3633 
 201      00
 202               	.LC14:
 203 00d1 0A53 7461 		.string	"\nStatus in NTP: %d. Error: %d"
 203      7475 7320 
 203      696E 204E 
 203      5450 3A20 
 203      2564 2E20 
 204               	.LC15:
 205 00ef 0A25 642C 		.string	"\n%d, Failed to retrieve time. Retrying..."
 205      2046 6169 
 205      6C65 6420 
 205      746F 2072 
 205      6574 7269 
 206               	.LC16:
 207 0119 0A45 7272 		.string	"\nError retrieving NTP. Time not synced with the NTP server!"
 207      6F72 2072 
 207      6574 7269 
 207      6576 696E 
 207      6720 4E54 
 208               	.LC17:
 209 0155 0A53 7563 		.string	"\nSuccess. NTP time is: %02d:%02d:%02d %d-%d-%d"
 209      6365 7373 
 209      2E20 4E54 
 209      5020 7469 
 209      6D65 2069 
 210               		.text
 211               	.global	NTP
 212               		.type	NTP, @function
 213               	NTP:
 214               	/* prologue: frame size=8 */
 215 0152 CF92      		push r12
 216 0154 DF92      		push r13
 217 0156 EF92      		push r14
 218 0158 FF92      		push r15
 219 015a 0F93      		push r16
 220 015c 1F93      		push r17
 221 015e CF93      		push r28
 222 0160 DF93      		push r29
 223 0162 CDB7      		in r28,__SP_L__
 224 0164 DEB7      		in r29,__SP_H__
 225 0166 2897      		sbiw r28,8
 226 0168 0FB6      		in __tmp_reg__,__SREG__
 227 016a F894      		cli
 228 016c DEBF      		out __SP_H__,r29
 229 016e 0FBE      		out __SREG__,__tmp_reg__
 230 0170 CDBF      		out __SP_L__,r28
 231               	/* prologue end (size=16) */
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 6


 232 0172 6C01      		movw r12,r24
 233 0174 82E0      		ldi r24,lo8(2)
 234 0176 90E0      		ldi r25,hi8(2)
 235 0178 A0E0      		ldi r26,hlo8(2)
 236 017a B0E0      		ldi r27,hhi8(2)
 237 017c 8D83      		std Y+5,r24
 238 017e 9E83      		std Y+6,r25
 239 0180 AF83      		std Y+7,r26
 240 0182 B887      		std Y+8,r27
 241 0184 1982      		std Y+1,__zero_reg__
 242 0186 1A82      		std Y+2,__zero_reg__
 243 0188 1B82      		std Y+3,__zero_reg__
 244 018a 1C82      		std Y+4,__zero_reg__
 245 018c 80E0      		ldi r24,lo8(.LC11)
 246 018e 90E0      		ldi r25,hi8(.LC11)
 247 0190 0E94 0000 		call puts
 248 0194 80E0      		ldi r24,lo8(.LC12)
 249 0196 90E0      		ldi r25,hi8(.LC12)
 250 0198 0E94 0000 		call LcdWriteSecondLine
 251 019c 80E0      		ldi r24,lo8(.LC13)
 252 019e 90E0      		ldi r25,hi8(.LC13)
 253 01a0 0E94 0000 		call inet_addr
 254 01a4 6983      		std Y+1,r22
 255 01a6 7A83      		std Y+2,r23
 256 01a8 8B83      		std Y+3,r24
 257 01aa 9C83      		std Y+4,r25
 258 01ac 80E0      		ldi r24,lo8(eth0IfName)
 259 01ae 90E0      		ldi r25,hi8(eth0IfName)
 260 01b0 0E94 0000 		call NutDhcpError
 261 01b4 8C01      		movw r16,r24
 262 01b6 80E0      		ldi r24,lo8(eth0IfName)
 263 01b8 90E0      		ldi r25,hi8(eth0IfName)
 264 01ba 0E94 0000 		call NutDhcpStatus
 265 01be 1F93      		push r17
 266 01c0 0F93      		push r16
 267 01c2 9F93      		push r25
 268 01c4 8F93      		push r24
 269 01c6 80E0      		ldi r24,lo8(.LC14)
 270 01c8 90E0      		ldi r25,hi8(.LC14)
 271 01ca 9F93      		push r25
 272 01cc 8F93      		push r24
 273 01ce 0E94 0000 		call printf
 274 01d2 2DB7      		in r18,__SP_L__
 275 01d4 3EB7      		in r19,__SP_H__
 276 01d6 2A5F      		subi r18,lo8(-(6))
 277 01d8 3F4F      		sbci r19,hi8(-(6))
 278 01da 0FB6      		in __tmp_reg__,__SREG__
 279 01dc F894      		cli
 280 01de 3EBF      		out __SP_H__,r19
 281 01e0 0FBE      		out __SREG__,__tmp_reg__
 282 01e2 2DBF      		out __SP_L__,r18
 283 01e4 012B      		or r16,r17
 284 01e6 01F4      		brne .L14
 285 01e8 00E0      		ldi r16,lo8(0)
 286 01ea 10E0      		ldi r17,hi8(0)
 287               	.L16:
 288 01ec 85E0      		ldi r24,lo8(5)
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 7


 289 01ee E82E      		mov r14,r24
 290 01f0 F12C      		mov r15,__zero_reg__
 291 01f2 EC0E      		add r14,r28
 292 01f4 FD1E      		adc r15,r29
 293 01f6 B701      		movw r22,r14
 294 01f8 CE01      		movw r24,r28
 295 01fa 0196      		adiw r24,1
 296 01fc 0E94 0000 		call NutSNTPGetTime
 297 0200 892B      		or r24,r25
 298 0202 01F0      		breq .L17
 299 0204 68EE      		ldi r22,lo8(1000)
 300 0206 73E0      		ldi r23,hi8(1000)
 301 0208 80E0      		ldi r24,hlo8(1000)
 302 020a 90E0      		ldi r25,hhi8(1000)
 303 020c 0E94 0000 		call NutSleep
 304 0210 1F93      		push r17
 305 0212 0F93      		push r16
 306 0214 80E0      		ldi r24,lo8(.LC15)
 307 0216 90E0      		ldi r25,hi8(.LC15)
 308 0218 9F93      		push r25
 309 021a 8F93      		push r24
 310 021c 0E94 0000 		call printf
 311 0220 0F90      		pop __tmp_reg__
 312 0222 0F90      		pop __tmp_reg__
 313 0224 0F90      		pop __tmp_reg__
 314 0226 0F90      		pop __tmp_reg__
 315 0228 0A30      		cpi r16,10
 316 022a 1105      		cpc r17,__zero_reg__
 317 022c 01F0      		breq .L14
 318 022e 0F5F      		subi r16,lo8(-(1))
 319 0230 1F4F      		sbci r17,hi8(-(1))
 320 0232 00C0      		rjmp .L16
 321               	.L14:
 322 0234 80E0      		ldi r24,lo8(.LC16)
 323 0236 90E0      		ldi r25,hi8(.LC16)
 324 0238 9F93      		push r25
 325 023a 8F93      		push r24
 326 023c 0E94 0000 		call printf
 327 0240 F601      		movw r30,r12
 328 0242 1582      		std Z+5,__zero_reg__
 329 0244 1482      		std Z+4,__zero_reg__
 330 0246 1382      		std Z+3,__zero_reg__
 331 0248 1282      		std Z+2,__zero_reg__
 332 024a 1182      		std Z+1,__zero_reg__
 333 024c 1082      		st Z,__zero_reg__
 334 024e CE01      		movw r24,r28
 335 0250 0596      		adiw r24,5
 336 0252 0E94 0000 		call localtime
 337 0256 0E94 0000 		call X12RtcSetClock
 338 025a 0E94 0000 		call LcdClearLine
 339 025e 80E0      		ldi r24,lo8(0)
 340 0260 0E94 0000 		call LcdBackLight
 341 0264 80E0      		ldi r24,lo8(0)
 342 0266 90E0      		ldi r25,hi8(0)
 343 0268 0F90      		pop __tmp_reg__
 344 026a 0F90      		pop __tmp_reg__
 345 026c 00C0      		rjmp .L20
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 8


 346               	.L17:
 347 026e C701      		movw r24,r14
 348 0270 0E94 0000 		call localtime
 349 0274 8C01      		movw r16,r24
 350 0276 0E94 0000 		call X12RtcSetClock
 351 027a F801      		movw r30,r16
 352 027c 8285      		ldd r24,Z+10
 353 027e 9385      		ldd r25,Z+11
 354 0280 8459      		subi r24,lo8(-(1900))
 355 0282 984F      		sbci r25,hi8(-(1900))
 356 0284 9F93      		push r25
 357 0286 8F93      		push r24
 358 0288 8085      		ldd r24,Z+8
 359 028a 9185      		ldd r25,Z+9
 360 028c 0196      		adiw r24,1
 361 028e 9F93      		push r25
 362 0290 8F93      		push r24
 363 0292 8681      		ldd r24,Z+6
 364 0294 9781      		ldd r25,Z+7
 365 0296 9F93      		push r25
 366 0298 8F93      		push r24
 367 029a 8081      		ld r24,Z
 368 029c 9181      		ldd r25,Z+1
 369 029e 9F93      		push r25
 370 02a0 8F93      		push r24
 371 02a2 8281      		ldd r24,Z+2
 372 02a4 9381      		ldd r25,Z+3
 373 02a6 9F93      		push r25
 374 02a8 8F93      		push r24
 375 02aa 8481      		ldd r24,Z+4
 376 02ac 9581      		ldd r25,Z+5
 377 02ae 9F93      		push r25
 378 02b0 8F93      		push r24
 379 02b2 80E0      		ldi r24,lo8(.LC17)
 380 02b4 90E0      		ldi r25,hi8(.LC17)
 381 02b6 9F93      		push r25
 382 02b8 8F93      		push r24
 383 02ba 0E94 0000 		call printf
 384 02be 0E94 0000 		call LcdClearLine
 385 02c2 81E0      		ldi r24,lo8(1)
 386 02c4 90E0      		ldi r25,hi8(1)
 387 02c6 2DB7      		in r18,__SP_L__
 388 02c8 3EB7      		in r19,__SP_H__
 389 02ca 225F      		subi r18,lo8(-(14))
 390 02cc 3F4F      		sbci r19,hi8(-(14))
 391 02ce 0FB6      		in __tmp_reg__,__SREG__
 392 02d0 F894      		cli
 393 02d2 3EBF      		out __SP_H__,r19
 394 02d4 0FBE      		out __SREG__,__tmp_reg__
 395 02d6 2DBF      		out __SP_L__,r18
 396               	.L20:
 397               	/* epilogue: frame size=8 */
 398 02d8 2896      		adiw r28,8
 399 02da 0FB6      		in __tmp_reg__,__SREG__
 400 02dc F894      		cli
 401 02de DEBF      		out __SP_H__,r29
 402 02e0 0FBE      		out __SREG__,__tmp_reg__
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 9


 403 02e2 CDBF      		out __SP_L__,r28
 404 02e4 DF91      		pop r29
 405 02e6 CF91      		pop r28
 406 02e8 1F91      		pop r17
 407 02ea 0F91      		pop r16
 408 02ec FF90      		pop r15
 409 02ee EF90      		pop r14
 410 02f0 DF90      		pop r13
 411 02f2 CF90      		pop r12
 412 02f4 0895      		ret
 413               	/* epilogue end (size=15) */
 414               	/* function NTP size 210 (179) */
 415               		.size	NTP, .-NTP
 416               		.data
 417               	.LC18:
 418 0184 5265 6769 		.string	"Registering device..."
 418      7374 6572 
 418      696E 6720 
 418      6465 7669 
 418      6365 2E2E 
 419               	.LC19:
 420 019a 0A52 6567 		.string	"\nRegistering device..."
 420      6973 7465 
 420      7269 6E67 
 420      2064 6576 
 420      6963 652E 
 421               	.LC20:
 422 01b1 436F 6E66 		.string	"Configuring network..."
 422      6967 7572 
 422      696E 6720 
 422      6E65 7477 
 422      6F72 6B2E 
 423               	.LC21:
 424 01c8 0A43 6F6E 		.string	"\nConfiguring network..."
 424      6669 6775 
 424      7269 6E67 
 424      206E 6574 
 424      776F 726B 
 425               		.text
 426               	.global	NetworkInit
 427               		.type	NetworkInit, @function
 428               	NetworkInit:
 429               	/* prologue: frame size=6 */
 430 02f6 0F93      		push r16
 431 02f8 1F93      		push r17
 432 02fa CF93      		push r28
 433 02fc DF93      		push r29
 434 02fe CDB7      		in r28,__SP_L__
 435 0300 DEB7      		in r29,__SP_H__
 436 0302 2697      		sbiw r28,6
 437 0304 0FB6      		in __tmp_reg__,__SREG__
 438 0306 F894      		cli
 439 0308 DEBF      		out __SP_H__,r29
 440 030a 0FBE      		out __SREG__,__tmp_reg__
 441 030c CDBF      		out __SP_L__,r28
 442               	/* prologue end (size=12) */
 443 030e DE01      		movw r26,r28
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 10


 444 0310 1196      		adiw r26,1
 445 0312 E0E0      		ldi r30,lo8(C.0.2383)
 446 0314 F0E0      		ldi r31,hi8(C.0.2383)
 447 0316 86E0      		ldi r24,lo8(6)
 448               	.L23:
 449 0318 0190      		ld r0,Z+
 450 031a 0D92      		st X+,r0
 451 031c 8150      		subi r24,lo8(-(-1))
 452 031e 01F4      		brne .L23
 453 0320 81E0      		ldi r24,lo8(1)
 454 0322 0E94 0000 		call LcdBackLight
 455 0326 80E0      		ldi r24,lo8(.LC18)
 456 0328 90E0      		ldi r25,hi8(.LC18)
 457 032a 0E94 0000 		call LcdWriteSecondLine
 458 032e 80E0      		ldi r24,lo8(.LC19)
 459 0330 90E0      		ldi r25,hi8(.LC19)
 460 0332 9F93      		push r25
 461 0334 8F93      		push r24
 462 0336 0E94 0000 		call printf
 463 033a 45E0      		ldi r20,lo8(5)
 464 033c 60E0      		ldi r22,lo8(-15616)
 465 033e 73EC      		ldi r23,hi8(-15616)
 466 0340 80E0      		ldi r24,lo8(devEth0)
 467 0342 90E0      		ldi r25,hi8(devEth0)
 468 0344 0E94 0000 		call NutRegisterDevice
 469 0348 0F90      		pop __tmp_reg__
 470 034a 0F90      		pop __tmp_reg__
 471 034c 892B      		or r24,r25
 472 034e 01F0      		breq .L24
 473 0350 80E0      		ldi r24,lo8(__c.2365)
 474 0352 90E0      		ldi r25,hi8(__c.2365)
 475 0354 00C0      		rjmp .L33
 476               	.L24:
 477 0356 0E94 0000 		call LcdClearLine
 478 035a 80E0      		ldi r24,lo8(.LC20)
 479 035c 90E0      		ldi r25,hi8(.LC20)
 480 035e 0E94 0000 		call LcdWriteSecondLine
 481 0362 80E0      		ldi r24,lo8(.LC21)
 482 0364 90E0      		ldi r25,hi8(.LC21)
 483 0366 9F93      		push r25
 484 0368 8F93      		push r24
 485 036a 0E94 0000 		call printf
 486 036e 20E0      		ldi r18,lo8(0)
 487 0370 30E0      		ldi r19,hi8(0)
 488 0372 40E0      		ldi r20,hlo8(0)
 489 0374 50E0      		ldi r21,hhi8(0)
 490 0376 BE01      		movw r22,r28
 491 0378 6F5F      		subi r22,lo8(-(1))
 492 037a 7F4F      		sbci r23,hi8(-(1))
 493 037c 80E0      		ldi r24,lo8(eth0IfName)
 494 037e 90E0      		ldi r25,hi8(eth0IfName)
 495 0380 0E94 0000 		call NutDhcpIfConfig
 496 0384 0F90      		pop __tmp_reg__
 497 0386 0F90      		pop __tmp_reg__
 498 0388 892B      		or r24,r25
 499 038a 01F0      		breq .L27
 500 038c 80E0      		ldi r24,lo8(__c.2367)
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 11


 501 038e 90E0      		ldi r25,hi8(__c.2367)
 502               	.L33:
 503 0390 9F93      		push r25
 504 0392 8F93      		push r24
 505 0394 8BE8      		ldi r24,lo8(-117)
 506 0396 8F93      		push r24
 507 0398 0E94 0000 		call LogMsg_P
 508 039c 0F90      		pop __tmp_reg__
 509 039e 0F90      		pop __tmp_reg__
 510 03a0 0F90      	 	pop __tmp_reg__
 511 03a2 80E0      		ldi r24,lo8(__c.2379)
 512 03a4 90E0      		ldi r25,hi8(__c.2379)
 513 03a6 9F93      		push r25
 514 03a8 8F93      		push r24
 515 03aa 1EE8      		ldi r17,lo8(-114)
 516 03ac 1F93      		push r17
 517 03ae 0E94 0000 		call LogMsg_P
 518 03b2 80E0      		ldi r24,lo8(eth0IfName)
 519 03b4 90E0      		ldi r25,hi8(eth0IfName)
 520 03b6 0E94 0000 		call NutDhcpError
 521 03ba 9F93      		push r25
 522 03bc 8F93      		push r24
 523 03be 80E0      		ldi r24,lo8(__c.2381)
 524 03c0 90E0      		ldi r25,hi8(__c.2381)
 525 03c2 9F93      		push r25
 526 03c4 8F93      		push r24
 527 03c6 1F93      		push r17
 528 03c8 0E94 0000 		call LogMsg_P
 529 03cc 00E0      		ldi r16,lo8(0)
 530 03ce 10E0      		ldi r17,hi8(0)
 531 03d0 8DB7      		in r24,__SP_L__
 532 03d2 9EB7      		in r25,__SP_H__
 533 03d4 0896      		adiw r24,8
 534 03d6 00C0      		rjmp .L34
 535               	.L27:
 536 03d8 80E0      		ldi r24,lo8(__c.2369)
 537 03da 90E0      		ldi r25,hi8(__c.2369)
 538 03dc 9F93      		push r25
 539 03de 8F93      		push r24
 540 03e0 1EE8      		ldi r17,lo8(-114)
 541 03e2 1F93      		push r17
 542 03e4 0E94 0000 		call LogMsg_P
 543 03e8 80E0      		ldi r24,lo8(confnet+1)
 544 03ea 90E0      		ldi r25,hi8(confnet+1)
 545 03ec 9F93      		push r25
 546 03ee 8F93      		push r24
 547 03f0 80E0      		ldi r24,lo8(__c.2371)
 548 03f2 90E0      		ldi r25,hi8(__c.2371)
 549 03f4 9F93      		push r25
 550 03f6 8F93      		push r24
 551 03f8 1F93      		push r17
 552 03fa 0E94 0000 		call LogMsg_P
 553 03fe 6091 0000 		lds r22,confnet+16
 554 0402 7091 0000 		lds r23,(confnet+16)+1
 555 0406 8091 0000 		lds r24,(confnet+16)+2
 556 040a 9091 0000 		lds r25,(confnet+16)+3
 557 040e 0E94 0000 		call inet_ntoa
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 12


 558 0412 9F93      		push r25
 559 0414 8F93      		push r24
 560 0416 80E0      		ldi r24,lo8(__c.2373)
 561 0418 90E0      		ldi r25,hi8(__c.2373)
 562 041a 9F93      		push r25
 563 041c 8F93      		push r24
 564 041e 1F93      		push r17
 565 0420 0E94 0000 		call LogMsg_P
 566 0424 6091 0000 		lds r22,confnet+20
 567 0428 7091 0000 		lds r23,(confnet+20)+1
 568 042c 8091 0000 		lds r24,(confnet+20)+2
 569 0430 9091 0000 		lds r25,(confnet+20)+3
 570 0434 0E94 0000 		call inet_ntoa
 571 0438 9F93      		push r25
 572 043a 8F93      		push r24
 573 043c 80E0      		ldi r24,lo8(__c.2375)
 574 043e 90E0      		ldi r25,hi8(__c.2375)
 575 0440 9F93      		push r25
 576 0442 8F93      		push r24
 577 0444 1F93      		push r17
 578 0446 0E94 0000 		call LogMsg_P
 579 044a 6091 0000 		lds r22,confnet+24
 580 044e 7091 0000 		lds r23,(confnet+24)+1
 581 0452 8091 0000 		lds r24,(confnet+24)+2
 582 0456 9091 0000 		lds r25,(confnet+24)+3
 583 045a 0E94 0000 		call inet_ntoa
 584 045e 9F93      		push r25
 585 0460 8F93      		push r24
 586 0462 80E0      		ldi r24,lo8(__c.2377)
 587 0464 90E0      		ldi r25,hi8(__c.2377)
 588 0466 9F93      		push r25
 589 0468 8F93      		push r24
 590 046a 1F93      		push r17
 591 046c 0E94 0000 		call LogMsg_P
 592 0470 01E0      		ldi r16,lo8(1)
 593 0472 10E0      		ldi r17,hi8(1)
 594 0474 8DB7      		in r24,__SP_L__
 595 0476 9EB7      		in r25,__SP_H__
 596 0478 4796      		adiw r24,23
 597               	.L34:
 598 047a 0FB6      		in __tmp_reg__,__SREG__
 599 047c F894      		cli
 600 047e 9EBF      		out __SP_H__,r25
 601 0480 0FBE      		out __SREG__,__tmp_reg__
 602 0482 8DBF      		out __SP_L__,r24
 603 0484 68EE      		ldi r22,lo8(1000)
 604 0486 73E0      		ldi r23,hi8(1000)
 605 0488 80E0      		ldi r24,hlo8(1000)
 606 048a 90E0      		ldi r25,hhi8(1000)
 607 048c 0E94 0000 		call NutSleep
 608 0490 C801      		movw r24,r16
 609               	/* epilogue: frame size=6 */
 610 0492 2696      		adiw r28,6
 611 0494 0FB6      		in __tmp_reg__,__SREG__
 612 0496 F894      		cli
 613 0498 DEBF      		out __SP_H__,r29
 614 049a 0FBE      		out __SREG__,__tmp_reg__
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 13


 615 049c CDBF      		out __SP_L__,r28
 616 049e DF91      		pop r29
 617 04a0 CF91      		pop r28
 618 04a2 1F91      		pop r17
 619 04a4 0F91      		pop r16
 620 04a6 0895      		ret
 621               	/* epilogue end (size=11) */
 622               	/* function NetworkInit size 218 (195) */
 623               		.size	NetworkInit, .-NetworkInit
 624               		.section	.progmem.data,"a",@progbits
 625               		.type	__c.2425, @object
 626               		.size	__c.2425, 26
 627               	__c.2425:
 628 0000 4572 726F 		.string	"Error: >> NutTcpConnect()"
 628      723A 203E 
 628      3E20 4E75 
 628      7454 6370 
 628      436F 6E6E 
 629               		.data
 630               		.type	eth0IfName, @object
 631               		.size	eth0IfName, 9
 632               	eth0IfName:
 633 01e0 6574 6830 		.string	"eth0"
 633      00
 634 01e5 0000 0000 		.skip 4,0
 635               		.section	.progmem.data
 636               		.type	__c.2381, @object
 637               		.size	__c.2381, 15
 638               	__c.2381:
 639 001a 4572 726F 		.string	"Error code: %d"
 639      7220 636F 
 639      6465 3A20 
 639      2564 00
 640               		.type	__c.2379, @object
 641               		.size	__c.2379, 34
 642               	__c.2379:
 643 0029 4572 726F 		.string	"Error: Cannot configure network.\n"
 643      723A 2043 
 643      616E 6E6F 
 643      7420 636F 
 643      6E66 6967 
 644               		.type	__c.2377, @object
 645               		.size	__c.2377, 12
 646               	__c.2377:
 647 004b 6777 2020 		.string	"gw     : %s"
 647      2020 203A 
 647      2025 7300 
 648               		.type	__c.2375, @object
 649               		.size	__c.2375, 12
 650               	__c.2375:
 651 0057 6970 2D6D 		.string	"ip-mask: %s"
 651      6173 6B3A 
 651      2025 7300 
 652               		.type	__c.2373, @object
 653               		.size	__c.2373, 12
 654               	__c.2373:
 655 0063 6970 2D61 		.string	"ip-addr: %s"
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 14


 655      6464 723A 
 655      2025 7300 
 656               		.type	__c.2371, @object
 657               		.size	__c.2371, 12
 658               	__c.2371:
 659 006f 6966 5F6E 		.string	"if_name: %s"
 659      616D 653A 
 659      2025 7300 
 660               		.type	__c.2369, @object
 661               		.size	__c.2369, 40
 662               	__c.2369:
 663 007b 4E65 7477 		.string	"Networking setup OK, new settings are:\n"
 663      6F72 6B69 
 663      6E67 2073 
 663      6574 7570 
 663      204F 4B2C 
 664               		.type	__c.2367, @object
 665               		.size	__c.2367, 28
 666               	__c.2367:
 667 00a3 4572 726F 		.string	"Error: >> NutDhcpIfConfig()"
 667      723A 203E 
 667      3E20 4E75 
 667      7444 6863 
 667      7049 6643 
 668               		.type	__c.2365, @object
 669               		.size	__c.2365, 30
 670               	__c.2365:
 671 00bf 4572 726F 		.string	"Error: >> NutRegisterDevice()"
 671      723A 203E 
 671      3E20 4E75 
 671      7452 6567 
 671      6973 7465 
 672               		.data
 673               		.type	C.0.2383, @object
 674               		.size	C.0.2383, 6
 675               	C.0.2383:
 676 01e9 00        		.byte	0
 677 01ea 06        		.byte	6
 678 01eb 98        		.byte	-104
 679 01ec 30        		.byte	48
 680 01ed 02        		.byte	2
 681 01ee 76        		.byte	118
 682               		.comm stream,2,1
 683               	/* File "source/network.c": code  597 = 0x0255 ( 536), prologues  30, epilogues  31 */
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 15


DEFINED SYMBOLS
                            *ABS*:00000000 network.c
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:3      *ABS*:0000003f __SREG__
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:4      *ABS*:0000003e __SP_H__
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:5      *ABS*:0000003d __SP_L__
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:6      *ABS*:00000000 __tmp_reg__
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:7      *ABS*:00000001 __zero_reg__
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:13     .text:00000000 stopStream
                            *COM*:00000002 stream
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:50     .text:0000000e connectToStream
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:627    .progmem.data:00000000 __c.2425
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:183    .text:00000140 playStream
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:213    .text:00000152 NTP
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:632    .data:000001e0 eth0IfName
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:428    .text:000002f6 NetworkInit
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:675    .data:000001e9 C.0.2383
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:670    .progmem.data:000000bf __c.2365
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:666    .progmem.data:000000a3 __c.2367
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:642    .progmem.data:00000029 __c.2379
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:638    .progmem.data:0000001a __c.2381
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:662    .progmem.data:0000007b __c.2369
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:658    .progmem.data:0000006f __c.2371
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:654    .progmem.data:00000063 __c.2373
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:650    .progmem.data:00000057 __c.2375
C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s:646    .progmem.data:0000004b __c.2377

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
fclose
NutTcpCreateSocket
inet_addr
NutTcpConnect
LogMsg_P
exit
_fdopen
fprintf
fputs
fflush
malloc
printf
fgets
free
play
puts
LcdWriteSecondLine
NutDhcpError
NutDhcpStatus
NutSNTPGetTime
NutSleep
localtime
X12RtcSetClock
LcdClearLine
LcdBackLight
devEth0
NutRegisterDevice
NutDhcpIfConfig
GAS LISTING C:\Users\Robin\AppData\Local\Temp/ccYvdZqC.s 			page 16


confnet
inet_ntoa
